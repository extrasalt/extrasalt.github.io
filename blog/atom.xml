<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://extrasalt.org/blog</id>
    <title>Mohan Muthukumar Blog</title>
    <updated>2022-10-05T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://extrasalt.org/blog"/>
    <subtitle>Mohan Muthukumar Blog</subtitle>
    <icon>https://extrasalt.org/img/favicon.ico</icon>
    <entry>
        <title type="html"><![CDATA[A Survey of Different Container Runtimes for Kubernetes]]></title>
        <id>container-runtimes</id>
        <link href="https://extrasalt.org/blog/container-runtimes"/>
        <updated>2022-10-05T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[A little bit of history]]></summary>
        <content type="html"><![CDATA[<h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-little-bit-of-history">A little bit of history<a class="hash-link" href="#a-little-bit-of-history" title="Direct link to heading">​</a></h3><p>When Kubernetes first came out, it was using Docker as it was. But Docker had a lot of other parts that kubernetes did not need. As a result of the fallout between coreos and Docker, Kubernetes was also forked as rktnetes: A distribution of Kubernetes that used rkt instead of Docker. This was untenable as with any fork, you would need a dedicated team to keep it in sync with upstream. This was a lose-lose situation for everyone. So, CRI was created. </p><p>CRI which stood for Container Runtime Interface established a contract between the kubelet and the container runtime engine. Any new container runtime, for as long as it's CRI compatiable should work with kubernetes easily. This enabled a wide variety of container runtime to come to the market. </p><p>Also stemming from the same Docker/rkt showdown was OCI specification and runc</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="oci-and-cri">OCI and CRI<a class="hash-link" href="#oci-and-cri" title="Direct link to heading">​</a></h3><p>CRI specifies that the kubelet expects from a container runtime
OCI specifies what a low level container creation engine like runc should respond with</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="containerd">containerd<a class="hash-link" href="#containerd" title="Direct link to heading">​</a></h3><p>You're likely already using this runtime because this is the one that comes with both Docker and the main Kubernetes distribution.
As a result of the aforementioned developments, the Docker team re-architected their codebase to make it more modular. Everything that was specific to running the container was inside containerd. So, all that Kubernetes needed to run containers was containerd. However, containerd wasn't CRI compliant. </p><p>So, a shim, cri-containerd, actually connects kubelet with containerd. For sometime, cri-containerd co-existed with the dockershim based runtime with dockershim being used by default. Eventually cri-containerd was made the default in 2020 and dockershim was deprecated to the confusion of everyone who wasn't already familiar with this. cri-containerd has been the way the main Kubernetes distribution has been working for a couple of years now. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cri-o">CRI-O<a class="hash-link" href="#cri-o" title="Direct link to heading">​</a></h3><p>CRI-O was a project spearheaded by RedHat for their Openshift Kubernetes Distribution OKD. Since containerd wasn't specifically written for kubernetes and required the cri-containerd shim, RedHat decided that would make a container runtime that was both CRI and OCI compatiable (Hence the name)</p><p>Unlike containerd, cri-o didn't run as a daemon and didn't require superuser priveleges to create a container. This meant that it was much more secure and stable</p><p>If you use podman instead of Docker, this is the container runtime that you would be getting.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kata-containers">Kata Containers<a class="hash-link" href="#kata-containers" title="Direct link to heading">​</a></h3><p>Running containers on a shared kernel came with its own set of problems. </p><ul><li>For one, since these containers are just namespaced processes, they still behave like real processes and have free access to disk and the network. If one container decides to excessively use the disk or the network, it is going to affect all the other containers running on that node.</li><li>Secondly, in a multi-tenant environment where the cluster operator doesn't control what containers run on these nodes, this poses a significant security risk since any kernel exploit can be leverged by a malicious container to harm other containers </li></ul><p>This is the problem that kata containers aims to solve. This project uses qemu-kvm to help Kubernetes spin actual virtual machines and treat them as containers. The Katacontainers project was the result of a merger of Intel's clearcontainers and hyper.sh's runV projects.</p><p>Kata containers projects provides an OCI compliant low-level container creation engine that is more a replacement for runc used by containerd and cri-o. This means that you would typically want to use CRI-O with Kata containers</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="firecracker">Firecracker<a class="hash-link" href="#firecracker" title="Direct link to heading">​</a></h3><p>Firecracker is not really a container runtime. Firecracker is a light weight VMM developed by Amazon. It has the impermeability of a VM and startup speed of a container. There are several projects that use Firecracker VMs that also implement the CRI interface. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="gvisor">gVisor<a class="hash-link" href="#gvisor" title="Direct link to heading">​</a></h3><p>gVisor is a project from Google with a focus on security. It uses a userspace Kernel to intercept syscalls from the application running inside the container. But since it's an emulated Kernel essentially, it's naturally slow.</p>]]></content>
        <author>
            <name>Mohan Muthukuamr</name>
        </author>
        <category label="kubernetes" term="kubernetes"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Coming soon]]></title>
        <id>first-blog-post</id>
        <link href="https://extrasalt.org/blog/first-blog-post"/>
        <updated>2022-10-01T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The posts are being migrated to this new CMS. You should still be able to access them Here]]></summary>
        <content type="html"><![CDATA[<p>The posts are being migrated to this new CMS. You should still be able to access them <a target="_blank" href="/slides/">Here</a></p><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque elementum dignissim ultricies. Fusce rhoncus ipsum tempor eros aliquam consequat. Lorem ipsum dolor sit amet</p>]]></content>
        <author>
            <name>Mohan Muthukuamr</name>
        </author>
        <category label="under-construction" term="under-construction"/>
    </entry>
</feed>